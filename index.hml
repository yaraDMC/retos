<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Reto 5S</title>
    <style>
        body {
            font-family: 'Arial', sans-serif;
            background-color: #f0f8ff;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
            margin: 0;
            touch-action: none; /* Para mejor manejo en m√≥viles */
        }
        h1 {
            color: #005a9c;
        }
        #area-juego {
            display: flex;
            gap: 20px;
            margin-top: 20px;
        }
        #escritorio {
            width: 300px;
            height: 250px; /* Hice el escritorio un poco m√°s alto */
            border: 3px dashed #888;
            background-color: #fdf8e1;
            padding: 10px;
            display: flex;
            flex-wrap: wrap;
            align-content: flex-start;
        }
        .objeto {
            font-size: 40px;
            cursor: grab;
            user-select: none; /* Evita que se seleccione el texto del emoji */
            margin: 5px;
        }
        .objeto:active {
            cursor: grabbing;
        }
        .zona-destino {
            width: 150px;
            height: 150px;
            border: 3px solid #333;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-direction: column;
            font-size: 20px;
            font-weight: bold;
            background-color: #fff;
            padding: 10px;
            text-align: center;
        }
        .zona-destino.hover {
            background-color: #dfffea; /* Verde claro al arrastrar sobre √©l */
        }
        #basura {
            background-color: #ffe0e0;
            border-color: #d9534f;
        }
        #utiles {
            background-color: #e0f7ff;
            border-color: #0275d8;
        }
        #mensaje-exito {
            font-size: 28px;
            color: #28a745;
            font-weight: bold;
            visibility: hidden; /* Oculto al inicio */
            margin-top: 20px;
            text-align: center;
        }
    </style>
</head>
<body>

    <h1>¬°El Reto de Ordenar! üöÄ</h1>
    <p>Arrastra cada cosa a su lugar correcto.</p>

    <div id="area-juego">
        <div id="basura" class="zona-destino" data-target="basura">
            üóëÔ∏è<br>Basura (Seiri)
        </div>
        <div id="utiles" class="zona-destino" data-target="util">
            üìö<br>√ötiles (Seiton)
        </div>
    </div>

    <p>Tu escritorio:</p>
    <div id="escritorio">
        <div id="obj1" class="objeto" draggable="true" data-type="basura">üçå</div>
        <div id="obj2" class="objeto" draggable="true" data-type="util">üìñ</div>
        <div id="obj3" class="objeto" draggable="true" data-type="basura">üìÑ</div>
        <div id="obj4" class="objeto" draggable="true" data-type="util">‚úèÔ∏è</div>
        
        <div id="obj5" class="objeto" draggable="true" data-type="basura">üçé</div>
        <div id="obj6" class="objeto" draggable="true" data-type="util">‚úÇÔ∏è</div>
        <div id="obj7" class="objeto" draggable="true" data-type="basura">üì∞</div>
        <div id="obj8" class="objeto" draggable="true" data-type="util">üìè</div>
    </div>

    <div id="mensaje-exito">
        ¬°Felicidades!<br>¬°Eres un S√∫per Guardi√°n del Orden! üèÜ
    </div>

    <script>
        // ¬°ESTA PARTE NO NECESITA CAMBIOS!
        // Detecta autom√°ticamente todos los divs con la clase 'objeto'
        const objetos = document.querySelectorAll('.objeto');
        const zonas = document.querySelectorAll('.zona-destino');
        const mensajeExito = document.getElementById('mensaje-exito');
        let objetoSiendoArrastrado = null;
        let itemsOrdenados = 0;
        const totalItems = objetos.length; // <-- ¬°Esto se actualiza solo a 8!

        // Para cada objeto
        objetos.forEach(objeto => {
            objeto.addEventListener('dragstart', (e) => {
                objetoSiendoArrastrado = e.target;
                setTimeout(() => e.target.style.visibility = 'hidden', 0); 
            });

            objeto.addEventListener('dragend', (e) => {
                e.target.style.visibility = 'visible'; 
                objetoSiendoArrastrado = null;
            });
        });

        // Para cada zona de destino
        zonas.forEach(zona => {
            zona.addEventListener('dragover', (e) => {
                e.preventDefault(); 
                zona.classList.add('hover');
            });

            zona.addEventListener('dragleave', () => {
                zona.classList.remove('hover');
            });

            zona.addEventListener('drop', (e) => {
                e.preventDefault();
                zona.classList.remove('hover');

                if (objetoSiendoArrastrado) {
                    const tipoObjeto = objetoSiendoArrastrado.dataset.type;
                    const tipoZona = zona.dataset.target;

                    if (tipoObjeto === tipoZona) {
                        objetoSiendoArrastrado.style.display = 'none'; 
                        itemsOrdenados++;
                        
                        if (itemsOrdenados === totalItems) {
                            mensajeExito.style.visibility = 'visible';
                        }
                    }
                }
            });
        });

        // --- Soporte T√°ctil (M√≥vil) ---
        let initialX, initialY, isDragging = false;

        objetos.forEach(objeto => {
            objeto.addEventListener('touchstart', (e) => {
                objetoSiendoArrastrado = e.target;
                isDragging = true;
                let touch = e.touches[0];
                initialX = touch.clientX - objeto.offsetLeft;
                initialY = touch.clientY - objeto.offsetTop;
                objeto.style.position = 'absolute';
                objeto.style.zIndex = '1000';
            }, { passive: false });

            document.addEventListener('touchmove', (e) => {
                if (!isDragging || !objetoSiendoArrastrado) return;
                e.preventDefault();
                let touch = e.touches[0];
                objetoSiendoArrastrado.style.left = (touch.clientX - initialX) + 'px';
                objetoSiendoArrastrado.style.top = (touch.clientY - initialY) + 'px';
            }, { passive: false });

            document.addEventListener('touchend', (e) => {
                if (!isDragging || !objetoSiendoArrastrado) return;
                isDragging = false;
                
                let touch = e.changedTouches[0];
                let elementoDebajo = document.elementFromPoint(touch.clientX, touch.clientY);
                let zona = elementoDebajo ? elementoDebajo.closest('.zona-destino') : null;

                if (zona) {
                    const tipoObjeto = objetoSiendoArrastrado.dataset.type;
                    const tipoZona = zona.dataset.target;

                    if (tipoObjeto === tipoZona) {
                        objetoSiendoArrastrado.style.display = 'none';
                        itemsOrdenados++;
                        if (itemsOrdenados === totalItems) {
                            mensajeExito.style.visibility = 'visible';
                        }
                    }
                }
                
                objetoSiendoArrastrado.style.position = 'static';
                objetoSiendoArrastrado.style.zIndex = 'auto';
                objetoSiendoArrastrado.style.left = 'auto';
                objetoSiendoArrastrado.style.top = 'auto';
                objetoSiendoArrastrado = null;
            });
        });
    </script>
</body>
</html>
